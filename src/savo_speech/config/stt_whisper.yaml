# Robot Savo — STT configuration for faster-whisper (tuned for ReSpeaker)

stt_node:
  ros__parameters:

    # ------------------------------------------------------------------------
    # Faster-Whisper model configuration
    # ------------------------------------------------------------------------
    model_size_or_path: "tiny.en"
    device: "cpu"
    compute_type: "int8"
    language: "en"
    beam_size: 3

    # ------------------------------------------------------------------------
    # Audio capture + VAD
    # ------------------------------------------------------------------------

    # 16 kHz audio, slightly shorter block for quicker reaction
    sample_rate: 16000

    # Shorter block → faster feedback, still enough for one command sentence
    block_duration_s: 2.5

    # Noise floor we saw earlier was about 0.000166.
    # Make the threshold very forgiving so speech is not missed:
    # - 0.0003 ≈ clearly above idle noise but below normal speech.
    energy_threshold: 0.0003

    # Accept even short transcripts like "stop", "status", "hello".
    min_transcript_chars: 3

    # Force input device to ReSpeaker 4 Mic Array (index 0 from sd.query_devices())
    # -1 = default input, 0 = ReSpeaker card explicitly.
    input_device_index: 0

    # ------------------------------------------------------------------------
    # ROS topics
    # ------------------------------------------------------------------------
    publish_topic: "/savo_intent/user_text"
